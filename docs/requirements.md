# 要件定義（real-estate-investment-mcpserver）

## 目的

個人投資家向けに、不動産投資の収益性を簡易に分析できるMCPサーバーを提供する。

- 入力: 物件価格、賃料、費用、融資条件、（任意）投資家属性
- 出力: 表面/実質利回り、キャッシュフロー、回収期間、減価償却、節税効果などの主要指標と簡単な推奨コメント

## 対象ユーザー

- 不動産投資初心者〜中級者の個人投資家
- 物件の一次評価を素早く行いたいユーザー

## 提供機能（ユーザーストーリー形式）

- ユーザーは、物件価格と月額賃料を入力すると、表面利回りが確認できる
- ユーザーは、費用割合や融資条件（割合・金利・期間）を入力すると、
  - 実質利回り、月次/年間キャッシュフロー、回収期間が確認できる
- ユーザーは、建物種別を指定すると、減価償却費が自動計算される
- ユーザーは、（任意で）税率を入力すると、概算の節税効果と税引後収益が確認できる
- ユーザーは、分析結果に基づく簡易な推奨コメントを得られる

## 受け入れ基準

- 必須入力（物件価格、月額賃料）が未入力/0以下の場合、わかりやすいエラーを返す
- 計算精度:
  - 表面利回り: 小数点以下10桁以内に丸め（テスト準拠）
  - 出力の端数処理: 指定箇所で四捨五入（現行テストに合わせる）
- 減価償却: 種別ごとの既定耐用年数に基づく年額計算
- バリデーション: 金利(0〜20%)、期間(1〜35年)、入居月数(0〜12)を検証
- ツールインターフェース: simple_property_analysis の入力スキーマと説明が提供される
- テスト: 既存のpytestにより14件が成功すること

## 非機能要件

- 品質: pre-commit（Black, isort, 基本フック）でコードスタイルを維持
- 保守: 計算のマジックナンバーは定数化し一元管理
- 速度: 単一分析はサブ秒で完了（現行テスト基準）
- 依存: Poetryで依存管理。Python 3.11+ を想定

## 今後の拡張余地（例）

- 複利/元金均等返済の選択、減価償却の詳細（定額/定率）、空室率の取り扱い
- 外部データ連携（市況・地価API）
- MCPサーバー本体のツール拡張（複数分析メニュー）
